#!/usr/bin/env bash

vol_icons="/usr/share/icons/Papirus-Dark/22x22/actions/"
cur_vol=$(awk -F"[][]" '/Left:/ { print $2 }' <(amixer sget Master) | sed 's/%//g')
low_vol=33
high_vol=66

if [ "$cur_vol" -eq 0 ]; then
  dunstify -a "Speakers" \
    -r 100 \
    -i "$vol_icons/audio-volume-muted.svg" \
    "Speakers muted"
elif [ "$cur_vol" -lt "$low_vol" ]; then
  dunstify -a "Speakers" \
    -r 100 \
    -i "$vol_icons/audio-volume-low.svg" \
    "Speakers volume: $cur_vol%"
elif [ "$cur_vol" -ge "$low_vol" ] && [ "$cur_vol" -le "$high_vol" ]; then
  dunstify -a "Speakers" \
    -r 100 \
    -i "$vol_icons/audio-volume-medium.svg" \
    "Speakers volume: $cur_vol%"
elif [ "$cur_vol" -gt "$high_vol" ]; then
  dunstify -a "Speakers" \
    -r 100 \
    -i "$vol_icons/audio-volume-high.svg" \
    "Speakers volume: $cur_vol%"
fi

# how=$1
# value=$2
# script=$(basename "$0")

# if [[ "$how" == "down" ]]; then
#   # pactl set-sink-volume @DEFAULT_SINK@ -"$value"%
#   amixer sset Master $value%-
#   new=$(awk '/%/ {gsub(/[\[\]]/,""); print $4}' <(amixer sget Master))
#   notify-send --urgency=low --expire-time=50 --app-name="$script" "Down to $new"
# elif [[ "$how" == "up" ]]; then
#   # pactl set-sink-volume @DEFAULT_SINK@ +"$value"%
#   amixer sset Master $value%+
#   new=$(awk '/%/ {gsub(/[\[\]]/,""); print $4}' <(amixer sget Master))
#   notify-send --urgency=low --expire-time=50 --app-name="$script" "Up to $new"
# fi
